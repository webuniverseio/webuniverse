<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/1.20f36077ddb4ff6a2ed9.css">@keyframes Header-module--logoCircleColor--1tkFQ{0%{border-color:#00f6ff;border-color:var(--header-initial-color);box-shadow:0 0 10px #00f6ff,inset 0 0 20px #00f6ff;box-shadow:var(--header-box-shadow-base1) var(--header-initial-color),var(--header-box-shadow-base2) var(--header-initial-color)}14%{border-color:#68afff;box-shadow:0 0 10px #68afff,inset 0 0 20px #68afff;box-shadow:var(--header-box-shadow-base1) #68afff,var(--header-box-shadow-base2) #68afff}28%{border-color:#00ff0a;box-shadow:0 0 10px #00ff0a,inset 0 0 20px #00ff0a;box-shadow:var(--header-box-shadow-base1) #00ff0a,var(--header-box-shadow-base2) #00ff0a}42%{border-color:#ff0;box-shadow:0 0 10px #ff0,inset 0 0 20px #ff0;box-shadow:var(--header-box-shadow-base1) #ff0,var(--header-box-shadow-base2) #ff0}57%{border-color:red;box-shadow:0 0 10px red,inset 0 0 20px red;box-shadow:var(--header-box-shadow-base1) red,var(--header-box-shadow-base2) red}71%{border-color:#fb00ff;box-shadow:0 0 10px #fb00ff,inset 0 0 20px #fb00ff;box-shadow:var(--header-box-shadow-base1) #fb00ff,var(--header-box-shadow-base2) #fb00ff}85%{border-color:#ff006c;box-shadow:0 0 10px #ff006c,inset 0 0 20px #ff006c;box-shadow:var(--header-box-shadow-base1) #ff006c,var(--header-box-shadow-base2) #ff006c}to{border-color:#00f6ff;border-color:var(--header-initial-color);box-shadow:0 0 10px #00f6ff,inset 0 0 20px #00f6ff;box-shadow:var(--header-box-shadow-base1) var(--header-initial-color),var(--header-box-shadow-base2) var(--header-initial-color)}}:root{--header-initial-color:#00f6ff;--header-box-shadow-base1:0 0 10px;--header-box-shadow-base2:inset 0 0 20px}.Header-module--header--1Op28{height:190px;display:table-row;text-align:center}.Header-module--header--1Op28:before{position:absolute;top:20px;left:50%;border-radius:50%;border:1px solid #00f6ff;border:1px solid var(--header-initial-color);box-shadow:0 0 10px #00f6ff,inset 0 0 20px #00f6ff;box-shadow:var(--header-box-shadow-base1) var(--header-initial-color),var(--header-box-shadow-base2) var(--header-initial-color);margin-left:-70px;width:140px;height:140px;display:inline-block;background-color:#0d0627;content:"";animation:Header-module--logoCircleColor--1tkFQ 20s infinite}.Header-module--header--1Op28 a{color:#fff}:root{--logo-letter-spacing:0.28em}.Header-module--logo--3yAKW{margin-top:35px;z-index:2;color:#fff;font-size:80px;position:relative;padding-bottom:.1em;display:inline-block;line-height:1;font-family:Times New Roman,Times,serif;font-weight:700;text-align:center;text-transform:uppercase;letter-spacing:.28em;letter-spacing:var(--logo-letter-spacing)}.Header-module--logo--3yAKW:after{position:absolute;left:0;bottom:-1px;border-bottom:1px solid;width:calc(100% - .28em);width:calc(100% - var(--logo-letter-spacing));content:""}.Header-module--logo--3yAKW:before{position:absolute;top:0;width:100%;font-size:.7em;content:"..";text-align:center;letter-spacing:1.15em;text-indent:1.2em}.wf-slabo27px-n4-active .Header-module--logo--3yAKW{font-family:Times New Roman,Times,serif}.Header-module--logoUniverse--228x7{display:block;font-size:.15em;letter-spacing:2em}.Footer-module--footer--1AXXX{position:absolute;bottom:0;left:0;right:0;padding:10px;height:var(--footer-height);font-family:Georgia,Times New Roman,Times,serif;text-align:center;font-size:16px;line-height:1.25}@media (max-width:580px){.Footer-module--footer--1AXXX{font-size:14px}}.TopBar-module--topBar--2CchJ{margin:0 var(--page-content-side-padding);border-bottom:1px solid var(--line-color);padding-top:20px;padding-bottom:10px}@media (min-width:780.5px){.TopBar-module--topBar--2CchJ{display:flex;justify-content:space-between}}.TopBar-module--topBar--2CchJ .gsc-control-cse{position:relative;top:-4px;padding:0;line-height:1}@media (max-width:780.5px){.TopBar-module--topBar--2CchJ .gsc-control-cse{top:0}}.TopBar-module--topBar--2CchJ .gsc-search-box{margin-bottom:0}.TopBar-module--navigation--24o6I a{text-decoration:none}.TopBar-module--navigation--24o6I a:focus,.TopBar-module--navigation--24o6I a:hover{text-decoration:underline}@media (max-width:780.5px){.TopBar-module--navigation--24o6I{text-align:center}}@media (max-width:580px){.TopBar-module--navigation--24o6I{font-size:14px;line-height:1.82}}.TopBar-module--navigation--24o6I{position:relative}.wf-slabo27px-n4-active .TopBar-module--navigation--24o6I{font-family:Slabo\ 27px,serif}.TopBar-module--topBar--2CchJ .TopBar-module--navigation--24o6I{letter-spacing:.1em;text-transform:uppercase}.TopBar-module--navigation__separator--1VawK{position:relative;top:.15em;border-left:1px solid #777e83;padding-right:1px;height:1em;display:inline-block}@media (max-width:470px){.TopBar-module--topBar--2CchJ .TopBar-module--navigation__separator--1VawK:nth-child(6),.TopBar-module--topBar--2CchJ .TopBar-module--navigation__separator--1VawK:nth-child(10){height:0;display:block}}.TopBar-module--navigation__skip--3GTFo:focus{z-index:2;position:absolute;left:auto;border:1px solid;padding:4px;background-color:#fff}@media (min-width:780.5px){.TopBar-module--search--Em2TM{width:32%}}
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}

/*!
                        ,,                                  ,,
                       *MM                                  db
                        MM
`7M'    ,A    `MF.gP"Ya MM,dMMb.    `7MM  `7MM `7MMpMMMb. `7MM`7M'   `MF.gP"Ya`7Mb,od8,pP"Ybd .gP"Ya
  VA   ,VAA   ,V,M'   YbMM    `Mb     MM    MM   MM    MM   MM  VA   ,V,M'   Yb MM' "'8I   `",M'   Yb
   VA ,V  VA ,V 8M""""""MM     M8     MM    MM   MM    MM   MM   VA ,V 8M"""""" MM    `YMMMa.8M""""""
    VVV    VVV  YM.    ,MM.   ,M9     MM    MM   MM    MM   MM    VVV  YM.    , MM    L.   I8YM.    ,
     W      W    `Mbmmd'P^YbmdP'      `Mbod"YML.JMML  JMML.JMML.   W    `Mbmmd.JMML.  M9mmmP' `Mbmmd'
*/:root{--page-content-side-padding:25px;--footer-height:120px;--line-color:#c7cacc;--primary-color:#004adf}:focus{outline:1px dotted}html{font-size:17px;line-height:1.5;box-sizing:border-box}*,:after,:before{box-sizing:inherit}body,input,select,textarea{font-family:Times New Roman,Times,serif}blockquote,body,dd,dl,dt,h1,h2,h3,h4,h5,h6,iframe,li,ol,p,pre,ul{margin:0;border:0;padding:0}input,select{margin:0;padding:0}body,html{height:100%}body:after{position:fixed;top:0;left:0;right:0;bottom:0;content:""}@media (max-width:470px){body:after{background:url(/static/bg--small-e8b94dd53a364df58b1b477d00e52c49.jpg) no-repeat 50% fixed;background:url(/static/bg--small-e8b94dd53a364df58b1b477d00e52c49.jpg) no-repeat 50% fixed,radial-gradient(ellipse at center,#513580 0,#0d0627 100%);background-size:cover;background-attachment:scroll}}@media (min-width:471px){body:after{background:url(/static/bg--medium-4c53097e6c775c50e7a985d624990eb3.jpg) no-repeat 50% fixed;background:url(/static/bg--medium-4c53097e6c775c50e7a985d624990eb3.jpg) no-repeat 50% fixed,radial-gradient(ellipse at center,#513580 0,#0d0627 100%);background-size:cover;background-attachment:scroll}}@media (min-width:781.5px){body:after{background:url(/static/bg-a20f6844c01ab321010245ccaeb09de9.jpg) no-repeat 50% fixed;background:url(/static/bg-a20f6844c01ab321010245ccaeb09de9.jpg) no-repeat 50% fixed,radial-gradient(ellipse at center,#513580 0,#0d0627 100%);background-size:cover;background-attachment:scroll}}a{color:#004adf;color:var(--primary-color);text-decoration:underline;cursor:pointer}a:hover{text-decoration:none}a:focus{outline:thin dotted}a:active{outline:none!important}a img{border:0}h1,h2,h3,h4,h5,h6{color:#004adf;color:var(--primary-color);font-weight:400}.wf-slabo27px-n4-active h1,.wf-slabo27px-n4-active h2,.wf-slabo27px-n4-active h3,.wf-slabo27px-n4-active h4,.wf-slabo27px-n4-active h5,.wf-slabo27px-n4-active h6{font-family:Slabo\ 27px,serif}h1{font-size:36px;line-height:1.41667}h2{font-size:30px;line-height:1.7}h3{font-size:24px;line-height:1.0625}h4{font-size:20px;line-height:1.275}h5{font-size:16px;line-height:1.59375}h6{font-size:14px;line-height:1.82143}@media (max-width:470px){h1{font-size:29px;line-height:1.75862}h2{font-size:25px;line-height:1.02}h3{font-size:21px;line-height:1.21429}h4{font-size:17px;line-height:1.5}h5{font-size:16px;line-height:1.59375}h6{font-size:14px;line-height:1.82143}}code{padding:2px;background-color:#e0e0e0}.a11y__element,.a11y__skip{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}.a11y__skip:focus{position:static;width:auto;height:auto}.list{list-style-type:none}.list__item{margin-top:1em}.list__item:first-child{margin-top:0}.list__item--hrDashes{margin-top:1em;padding-top:1em;border-top:1px dashed #c7cacc;border-top:1px dashed var(--line-color)}.list__item--hrDashes:first-child{margin-top:0;border-top:0;padding-top:0}.content-entry{line-height:1.5}.content-entry blockquote,.content-entry h1,.content-entry h2,.content-entry h3,.content-entry h4,.content-entry h5,.content-entry h6,.content-entry header,.content-entry ol,.content-entry p,.content-entry table,.content-entry ul{margin:1em 0 0}.content-entry blockquote:first-child,.content-entry h1:first-child,.content-entry h2:first-child,.content-entry h3:first-child,.content-entry h4:first-child,.content-entry h5:first-child,.content-entry h6:first-child,.content-entry header:first-child,.content-entry ol:first-child,.content-entry p:first-child,.content-entry table:first-child,.content-entry ul:first-child{margin-top:0}.content-entry h1+h2,.content-entry h1+ol,.content-entry h1+ul,.content-entry h2+h3,.content-entry h2+ol,.content-entry h2+ul,.content-entry h3+ol,.content-entry h3+ul,.content-entry h4+ol,.content-entry h4+ul,.content-entry h5+ol,.content-entry h5+ul,.content-entry h6+ol,.content-entry h6+ul,.content-entry p+ol,.content-entry p+ul{margin-top:.2em}.content-entry h1,.content-entry h2,.content-entry h3,.content-entry h4,.content-entry h5,.content-entry h6{line-height:1.2}.content-entry small{font-size:.85em}.content-entry img{max-width:100%}.content-entry ol,.content-entry ul{margin-left:20px}.content-entry li{margin:7px 0 0}.content-entry table{border-collapse:collapse}.content-entry td,.content-entry th{border-color:#000;border-style:dotted;border-width:1px 0 0 1px;padding:.8em}.content-entry td:first-child,.content-entry th:first-child{border-left:0}.content-entry tr:first-child td,.content-entry tr:first-child th{border-top:0}.gsc-control-cse,.gsc-control-cse *{box-sizing:content-box}.gsc-control-cse table{border-collapse:separate}.gsc-completion-container{color:#000}.prism-code{margin-top:1em;margin-bottom:1em;overflow:auto;border-right:5px}.h-decorate-on-hover{text-decoration:none}.h-decorate-on-hover:focus,.h-decorate-on-hover:hover{text-decoration:underline}.nowrap{white-space:nowrap}:root{--page-width:884px;--page-side-margin:15px;--wrapper-margin:auto}@media (max-width:914px){:root{--wrapper-margin:var(--page-side-margin)}}.Layout-module--wrapper--3bVQH{position:relative;z-index:20;margin-left:auto;margin-left:var(--wrapper-margin);margin-right:auto;margin-right:var(--wrapper-margin);max-width:884px;max-width:var(--page-width);height:100%}.Layout-module--layoutBase--2SXw6{height:100%;width:100%;display:table;table-layout:fixed}.Layout-module--layoutBase--2SXw6:after{height:50px;display:table-row;content:""}.Layout-module--contentWrapper--16aOg{display:table-row}.Layout-module--pageContent--zJ0oo{position:relative;border-radius:35px;display:table-cell;background-color:#fff;color:#000;box-shadow:0 0 10px 0 #cff,inset 0 0 10px 0 rgba(0,0,0,.5)}.Layout-module--pageContentPadding--2ki1K{padding:0 var(--page-content-side-padding)}.Layout-module--pageContentMain--xF1jo{padding-top:1em;padding-bottom:1em;margin-bottom:var(--footer-height);outline:0;overflow:hidden}.Date-module--datetime--4zmFm{font-style:italic;white-space:nowrap}</style><style data-href="/component---src-templates-article-js.1937cebf167259bb1546.css">.Article-module--imageCopyright--3qWBC{position:relative;margin-top:-2em;padding:0 5px;display:block;background-color:rgba(0,0,0,.5);color:#fff;font-size:.8em}.Article-module--imageWrapper--3ZHeH{margin:auto;display:table}.Article-module--imageWrapper--3ZHeH img{width:100%}.Article-module--title--3IzxB{font-weight:400}.Article-module--title--3IzxB br{display:none}</style><meta name="generator" content="Gatsby 2.0.104"/><title data-react-helmet="true">Asynchronous programming with ES6 generators, promises and npm-co | Web Universe</title><link data-react-helmet="true" rel="dns-prefetch" href="//webuniverse.disqus.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//a.disquscdn.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//disqus.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//glitter-services.disqus.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//referrer.disqus.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//cse.google.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//www.google-analytics.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//www.google.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//ajax.googleapis.com"/><link data-react-helmet="true" rel="dns-prefetch" href="//fonts.googleapis.com"/><link data-react-helmet="true" rel="canonical" href="https://webuniverse.io/asynchronous-programming-with-ES6-generators-promises-and-npm-co/"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/><link data-react-helmet="true" rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192"/><link data-react-helmet="true" rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160"/><link data-react-helmet="true" rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"/><link data-react-helmet="true" rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link data-react-helmet="true" rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><meta data-react-helmet="true" http-equiv="x-dns-prefetch-control" content="on"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@webuniverseio"/><meta data-react-helmet="true" property="og:url" content="https://webuniverse.io/asynchronous-programming-with-ES6-generators-promises-and-npm-co/"/><meta data-react-helmet="true" name="twitter:url" content="https://webuniverse.io/asynchronous-programming-with-ES6-generators-promises-and-npm-co/"/><meta data-react-helmet="true" property="og:title" content="Asynchronous programming with ES6 generators, promises and npm-co | Web Universe"/><meta data-react-helmet="true" name="twitter:title" content="Asynchronous programming with ES6 generators, promises and npm-co | Web Universe"/><meta data-react-helmet="true" property="og:site_name" content="Web Universe"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="article:publisher" content="https://www.facebook.com/webuniverseio"/><meta data-react-helmet="true" property="article:published_time" content="2015-02-03T18:20:00.000Z"/><meta data-react-helmet="true" name="description" content="Simplify your code by writing an asynchronous code in a synchronous manner"/><meta data-react-helmet="true" property="og:description" content="Simplify your code by writing an asynchronous code in a synchronous manner"/><meta data-react-helmet="true" name="twitter:description" content="Simplify your code by writing an asynchronous code in a synchronous manner"/><meta data-react-helmet="true" property="og:image" content="/static/image-e6672ddceffaa3bba13b1108109c031c.jpg"/><meta data-react-helmet="true" name="twitter:image" content="/static/image-e6672ddceffaa3bba13b1108109c031c.jpg"/><meta data-react-helmet="true" name="format-detection" content="telephone=no"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#2b5797"/><meta data-react-helmet="true" name="msapplication-TileImage" content="/mstile-144x144.png"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><script defer="" src="//d2wy8f7a9ursnm.cloudfront.net/v5/bugsnag.min.js"></script><script>
      window.addEventListener('DOMContentLoaded', function() {
        'use strict';
        /*global bugsnag*/
        console.log('hello world');
        window.bugsnagClient = bugsnag('0b2a77c52e8e4855ade387cbcf43e649');
      });
    </script><link as="script" rel="preload" href="/app-ea88f0aec592a29ca161.js"/><link as="script" rel="preload" href="/component---src-templates-article-js-85e2508dd761476bc7e5.js"/><link as="script" rel="preload" href="/1-677281b28f2203a41fa3.js"/><link as="script" rel="preload" href="/0-5d8ca4d8f14081fc418a.js"/><link as="script" rel="preload" href="/webpack-runtime-e01e0c1bfe857930ccb7.js"/><link as="fetch" rel="preload" href="/static/d/149/path---asynchronous-programming-with-es-6-generators-promises-and-npm-co-ed-7-755-CiuWMqTdt3VxQ3Tl1T4qTva98NQ.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div itemscope="" itemType="http://schema.org/WebPage"><meta itemProp="typicalAgeRange" content="17-"/><div class="Layout-module--wrapper--3bVQH"><div class="Layout-module--layoutBase--2SXw6"><header class="Header-module--header--1Op28" role="banner"><a href="/"><h1 class="Header-module--logo--3yAKW" itemProp="name">Web<span class="Header-module--logoUniverse--228x7">Universe</span></h1></a></header><div class="Layout-module--contentWrapper--16aOg"><div class="Layout-module--pageContent--zJ0oo"><div class="TopBar-module--topBar--2CchJ"><nav class="TopBar-module--navigation--24o6I" itemscope="" itemType="http://schema.org/SiteNavigationElement" role="navigation"><h2 class="a11y__element">Main navigation</h2><a href="#page-content__main" class="a11y__skip TopBar-module--navigation__skip--3GTFo">skip navigation</a><a itemProp="url" href="/"><span itemProp="name">Home</span></a> <span class="TopBar-module--navigation__separator--1VawK"></span> <a itemProp="url" href="/about/"><span itemProp="name">About</span></a> <span class="TopBar-module--navigation__separator--1VawK"></span> <a itemProp="url" href="/projects/"><span itemProp="name">Projects</span></a> <span class="TopBar-module--navigation__separator--1VawK"></span> <a itemProp="url" href="/recommended/"><span itemProp="name">Recommended</span></a> <span class="TopBar-module--navigation__separator--1VawK"></span> <a itemProp="url" href="/contact/"><span itemProp="name">Contact</span></a> </nav><div class="TopBar-module--search--Em2TM"><section><h3 class="a11y__element">Search panel</h3><div class="gcse-search" id="gcse-search" style="height:33px"></div></section></div></div><main id="page-content__main" tabindex="0" class="Layout-module--pageContentMain--xF1jo Layout-module--pageContentPadding--2ki1K"><div class="Article-module--article--3Feze" itemscope="" itemType="Article" id="article-asynchronous-programming-with-ES6-generators-promises-and-npm-co"><article class="content-entry" itemProp="articleBody"><div class="Article-module--imageWrapper--3ZHeH"><picture><source srcSet="/static/image-e6672ddceffaa3bba13b1108109c031c.jpg" media="(min-width: 600px)"/><img srcSet="/static/imageSmall-1831820375ff5ce62fb725795db9d9ac.jpg" alt="Asynchronous programming with ES6 generators, promises and npm-co"/></picture></div><h1 itemProp="name" class="Article-module--title--3IzxB">Asynchronous programming with ES6 generators, promises and npm-co</h1><time class="Date-module--datetime--4zmFm" dateTime="2015-02-03T18:20:00.000Z" itemProp="datePublished">03 February, 2015</time><meta itemProp="datePublished" content="2015-02-03T18:20:00.000Z"/><div><p>This article explains what an npm <code>co</code> module is, how it works and how it can help you to write much cleaner and simpler asynchronous code.</p><h2>The problem</h2><p>Writing asynchronous code could be very tricky, if you never did it before or didn&#x27;t learn or develop good patterns to approach it. Asynchronous programming in javascript became popular with arrival of single page applications and node.js (where most of the operations happen asynchronously by default). Traditionally javascript was handling async operations using callbacks, and at least once every web developer faced a problem called <a href="https://www.google.ca/search?q=callback+hell+definition&amp;tbm=isch"><code>callback hell</code></a> or <code>pyramid of doom</code>.</p><h2>Solutions</h2><p>A simple solution is to keep your code shallow, though error handling wouldn&#x27;t be that simple. Another one, very well established solution is to use promises. Using ES6 generators we can simplify code for promises and continue writing code in a synchronous, easy to follow, manner, while keeping it asynchronous. If you&#x27;re not familiar with how <a href="#promises">promises</a> or <a href="#generators">generators</a> are working, please do a quick research before you continue reading.</p><h3>co to the rescue</h3><p>co is a wrapper around promises and generators which allows to simplify asynchronous code a lot. Take a look at the example which shows how an async code could be written in a sync manner using co:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token function" style="color:#79b6f2">co</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token operator" style="color:#d7deea">*</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getResults</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//assume read and request perform asynchronous actions</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> a </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">read</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;index.js&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> b </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">request</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;http://google.ca&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//when all operations will finish </span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//res will have contents of index.js at [0]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//and response body from google at [1]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> res </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//...code which does something with res</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword" style="color:#c5a5c5">catch</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//if an error was thrown from read or request functions</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>Here is what co will do for us:</p><ul><li>Both read and request will execute in parallel on line 7 and when both of them finish - res array will hold results. It doesn&#x27;t matter if request finishes before read - co will ensure that results are assigned to appropriate indexes.</li><li>On node.js you would have to check for errors in both callbacks for read and request functions, to ensure that your application does not exit in an unhandled state, but with co we can only worry about an end result and add a single error handler using <code>.catch</code>.</li><li>Code is rather short and easy to understand</li></ul><p>So what exactly is happening? How does it work? To understand it better lets go over code of the main function in co and describe it. <a href="https://github.com/tj/co/blob/48ca4dcfa6b6a7396aef57e8d78928cfffc814bc/index.js#L41">Open</a> code in new window so that you can put it side by side.</p><p>Let`s modify example just a little, in order to show how various scenarios will work in co:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//example.js</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token function" style="color:#79b6f2">co</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token operator" style="color:#d7deea">*</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getResults</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//not really doing anything important,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//but will be useful to show how co works</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">yield</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">ex</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    console</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">message</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//assume read and request perform asynchronous actions</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> a </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">read</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;index.js&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> b </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">request</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;http://google.ca&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//when all operations will finish</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//res will have contents of index.js at [0]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//and response body from google at [1]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> res </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//...code, which does something with res</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword" style="color:#c5a5c5">catch</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">//if an error was thrown from read or request functions</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>First co saves context reference, in case you will ever want to use a context inside read or request functions:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:co</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> ctx </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token comment" style="color:#999999">//Context binding example</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">co</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token operator" style="color:#d7deea">*</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getResults</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token comment" style="color:#999999">/*&#x27;this&#x27; will point to context*/</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>Then it checks, if <code>gen</code> is a function. If it is, then co needs to initialize a generator object by calling a function and it also ensure that <code>this</code> has a proper context. If <code>gen</code> is already a generator object, a statement will be skipped:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:co</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">typeof</span><span class="token plain"> gen </span><span class="token operator" style="color:#d7deea">===</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;function&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> gen </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> gen</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>Then co returns a new Promise and runs <code>onFulfilled</code> function with no arguments. Inside that function it will try to execute a generator code until a first <code>yield</code> statement.</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:onFulfilled</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  ret </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> gen</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">next</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">//res is undefined</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>In our case following code would execute inside <code>getResults</code> generator:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//example.js</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">yield</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>If that code could throw an error - promise would be rejected with an error object and co would exit.</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:onFulfilled</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">e</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">reject</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>In our case generator returns an object with a <code>value</code> property containing yielded value and this object is assigned to <code>ret</code>. At that moment of time code would look like that:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:onFulfilled</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  ret </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">value</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> done</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>Then <code>onFulfilled</code> will call <code>next(ret);</code>. If <code>done</code> would be true, co would resolve a promise with the value and exit from next:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">done</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">resolve</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>Otherwise co attempts to convert <code>ret.value</code> to a promise (we&#x27;ll skip <code>toPromise</code> for now). <code>.call</code> is there to provide original context in case <code>ret.value</code> is another <a href="https://github.com/tj/co#yieldables">yieldable</a> value:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:next</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> value </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> toPromise</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>On next line co checks if value is not falsy and if it is a promise, and if so, it adds appropriate handlers for promise fulfilment or rejection and exits from next. </p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:next</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">value </span><span class="token operator" style="color:#d7deea">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">isPromise</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">then</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">onFulfilled</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> onRejected</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>Notice how <code>onFulfilled</code>, <code>onRejected</code> and <code>next</code> functions have references to <code>resolve</code> and <code>reject</code> callbacks from a new Promise, which was created at the beginning. If one of these functions calls <code>resolve</code> or <code>reject</code>, then top most promise will be settled. </p><p>In our case <code>ret.value</code> in our case is <code>false</code>, so next calls <code>onRejected</code> handler, passes it a new TypeError and exits.</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:next</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">onRejected</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TypeError</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;You may only yield a function, promise, generator, array, or object, &#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;but the following object was passed: &quot;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">String</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;&quot;&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p><code>onRejected</code> is working quite similar to <code>onFulfilled</code> function with the following difference - instead of running a code until next <code>yield</code> statement, it tries to throw an error inside generator function <em>at the place where it stopped before</em>:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:onRejected</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  ret </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> gen</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token keyword" style="color:#c5a5c5">throw</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>That means it will replace <code>yield false</code> with <code>throw err</code> and example would look like this:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//example.js</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">throw</span><span class="token plain"> err</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">//err is a TypeError</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">ex</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  console</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ex</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">message</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>That behaviour is completely normal for generators and is described on MDN:
{% blockquote MDN <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators</a> %}
You can force a generator to throw an exception by calling its throw() method and passing the exception value it should throw. This exception will be thrown from the current suspended context of the generator, as if the yield that is currently suspended were instead a throw value statement.
{% endblockquote %}
At that moment execution flow will get back to example code and, because an error was handled with try-catch, it will be logged in console. Example will continue execution until it will either reach the end of generator or face a new <code>yield</code>:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//example.js</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> a </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">read</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;index.js&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> b </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">request</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;http://google.ca&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> res </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">yield</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>So result of calling <code>gen.throw</code> in <code>onRejected</code> returns an array with a and b:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:onRejected</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  ret </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">value</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> done</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>Catch brunch is skipped but it would otherwise reject the promise. Finally, another <code>next</code> call happens: it would skip immediate resolve, convert array to a promise created with Promise.all (check out <code>arrayToPromise</code> function), which will be settled only when <code>a</code> and <code>b</code> promises are settled or one of them is rejected. Note how <code>arrayToPromise</code> is making sure that Promise.all argument is an array of promises:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:arrayToPromise</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">obj</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">toPromise</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p><code>toPromise</code> will first check if value is not falsy and if it is, it returns a value:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:toPromise</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">!</span><span class="token plain">obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>If value is a promise already, toPromise will return it:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:toPromise</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">isPromise</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>If value is a generator or a generator function, toPromise will recursively call co, pass it a context and an obj and as a result we will get a new promise:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:toPromise</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">isGeneratorFunction</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">||</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">isGenerator</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> co</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>If <code>obj</code> is a function, toPromise will wrap it in a promise. First argument in a function is assumed to be an error object (node.js error handling pattern, so all node js callback APIs are covered):</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:toPromise</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;function&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">typeof</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> thunkToPromise</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>If <code>obj</code> is an array or an object with <a href="https://github.com/tj/co#yieldables">yieldable</a> properties, co will recursively convert them to promises:</p><pre><pre class="prism-code language-js" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">//co/index.js:toPromise</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Array</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">isArray</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> arrayToPromise</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">isObject</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> objectToPromise</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span></div></pre></pre><p>So co ensures that <code>a</code> and <code>b</code> are converted to promises, and when both promises are fulfilled - Promise.all will ensure that results are assigned to appropriate indexes in an array. If one of them is rejected, then <code>.catch</code> callback from the example will be able to handle an error (log it somewhere, or re-try once again). In either scenario a new Promise (one returned from co at the very beginning) will be settled, code will be executed asynchronously, and in the manner expected by developer, and will have all benefits of central place for error handling.</p><p>In a nutshell this is exactly what happens in co: generators and promises take care of asynchronous operations and error handling, while keeping your code clean and easy to follow. Similar logic will be hidden behind a native support of async programming with <a href="https://www.youtube.com/watch?v=DqMFX91ToLw">ES7 async-await</a>. If you want to use co, generators and Promises in non ES6 environments, try out 6to5 transpiler (links below).</p><p>Thank you and please feel free to ask questions in the comments, follow us on <a href="https://www.facebook.com/webuniverseio">facebook</a> and <a href="https://twitter.com/webuniverseio">twitter</a> pages, or subscribe to our <a href="/rss.xml">feed</a>.</p><h2>Links</h2><ul><li>co - <a href="https://github.com/tj/co">https://github.com/tj/co</a>  </li><li>shallow code - <a href="http://exponential.io/blog/unnest-callbacks/">http://exponential.io/blog/unnest-callbacks/</a></li><li>6to5 transpiler (babeljs) - <a href="https://babeljs.io/docs/learn-es6/">https://babeljs.io/docs/learn-es6/</a></li></ul><h3>Promises<a name="promises"></a></h3><ul><li>description - <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></li><li>support - <a href="http://kangax.github.io/compat-table/es6/#Promise">http://kangax.github.io/compat-table/es6/#Promise</a></li><li>examples - <a href="http://www.2ality.com/2014/09/es6-promises-foundations.html">http://www.2ality.com/2014/09/es6-promises-foundations.html</a></li></ul><h3>Generators<a name="generators"></a></h3><ul><li>description and examples - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*</a></li><li>support - <a href="http://kangax.github.io/compat-table/es6/#generators">http://kangax.github.io/compat-table/es6/#generators</a></li></ul><style>
  main h1[itemprop="name"] {font-size: 1.72rem;}
</style></div><div id="disqus_thread"></div></article></div></main><footer class="Footer-module--footer--1AXXX" role="contentinfo">Disclaimer: Any viewpoints and opinions expressed on this site do not, in any way, reflect those of my employer.<br/><br/>All content, unless otherwise indicated,<!-- --> <span class="nowrap">is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license">CC BY 4.0</a>.</span><br/><span itemscope="" itemType="http://schema.org/Person" itemProp="author"><a itemProp="url" href="/about"><span itemProp="name">Sergey Zarouski</span></a> </span> <span itemProp="copyrightYear">2019</span>.</footer></div></div></div></div><noscript><div class="noscript">Javascript is disabled for this site in your browser. Please enable it if you want to see site in more interactive mode. To learn how click<!-- --> <a class="noscript-text--alternative" href="http://www.youtube.com/watch?v=0w8wr8a0r2M">here</a> <!-- -->or<!-- --> <a class="noscript-text--alternative" href="http://www.google.ca/search?q=how+to+enable+javascript&amp;tbs=vid:1">here</a>.</div></noscript></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-article-js","jsonName":"asynchronous-programming-with-es-6-generators-promises-and-npm-co-ed7","path":"/asynchronous-programming-with-ES6-generators-promises-and-npm-co/"};window.dataPath="149/path---asynchronous-programming-with-es-6-generators-promises-and-npm-co-ed-7-755-CiuWMqTdt3VxQ3Tl1T4qTva98NQ";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ea88f0aec592a29ca161.js"],"component---src-templates-article-js":["/component---src-templates-article-js.1937cebf167259bb1546.css","/component---src-templates-article-js-85e2508dd761476bc7e5.js"],"component---src-pages-index-js":["/component---src-pages-index-js.086838a6cbbeba4fc5ae.css","/component---src-pages-index-js-4568e795d7700df169d5.js"],"pages-manifest":["/pages-manifest-346b4544c9171da43e4d.js"]};/*]]>*/</script><script src="/webpack-runtime-e01e0c1bfe857930ccb7.js" async=""></script><script src="/0-5d8ca4d8f14081fc418a.js" async=""></script><script src="/1-677281b28f2203a41fa3.js" async=""></script><script src="/component---src-templates-article-js-85e2508dd761476bc7e5.js" async=""></script><script src="/app-ea88f0aec592a29ca161.js" async=""></script></body></html>